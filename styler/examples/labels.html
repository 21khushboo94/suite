<html>
<head>
    <title>Text Symbolizer</title>
    <link rel="stylesheet" type="text/css" href="../externals/ext/resources/css/ext-all.css" />
    <link rel="stylesheet" type="text/css" href="../externals/ext/resources/css/xtheme-gray.css" />
    <link rel="stylesheet" type="text/css" href="../externals/openlayers/theme/default/style.css" />
    <link rel="stylesheet" type="text/css" href="../externals/ux/colorpicker/color-picker.ux.css" />
    <link rel="stylesheet" type="text/css" href="../theme/css/styler.css" />
    
    <script type="text/javascript" src="../externals/ext/adapter/ext/ext-base.js"></script>
    <script type="text/javascript" src="../externals/ext/ext-all.js"></script>
    <script type="text/javascript" src="../externals/ux/colorpicker/color-picker.ux.js"></script>

    <script type="text/javascript" src="../externals/openlayers/lib/OpenLayers.js"></script>
    <!--<script type="text/javascript" src="../script/OpenLayers.js"></script>-->

    <script type="text/javascript" src="../externals/ux/colorpicker/color-picker.ux.js"></script>
    <script type="text/javascript" src="../externals/geoext/lib/GeoExt.js"></script>
    <script type="text/javascript" src="../lib/Styler/ColorManager.js"></script>
    <script type="text/javascript" src="../lib/Styler/widgets/form/ColorField.js"></script>
    <script type="text/javascript" src="../lib/Styler/widgets/FillSymbolizer.js"></script>
    <script type="text/javascript" src="../lib/Styler/widgets/form/FontComboBox.js"></script>
    <script type="text/javascript" src="../lib/Styler/widgets/TextSymbolizer.js"></script>
    <script>

    Ext.BLANK_IMAGE_URL = "../theme/img/blank.gif";

    var format = new OpenLayers.Format.SLD.v1_0_0();
    var sldWin;
    function showSLD(panel) {
        var symbolizer = panel.symbolizer;
        var node = format.writeNode("sld:TextSymbolizer", symbolizer);
        var text = OpenLayers.Format.XML.prototype.write.apply(format, [node]);
        if(!sldWin) {
            sldWin = new Ext.Window({
                title: "SLD",
                layout: "fit",
                closeAction: "hide",
                height: 300,
                width: 450,
                plain: true,
                modal: true,
                items: [{
                    xtype: "textarea",
                    value: text
                }]
            });
        } else {
            sldWin.items.items[0].setValue(text);
        }
        sldWin.show();
    }

    Ext.onReady(function() {

        var panel = new Styler.TextSymbolizer({
            title: "Text Symbolizer",
            renderTo: "panel",
            width: 235,
            border: true,
            bodyStyle: {padding: 10},
            attributes: new GeoExt.data.AttributeStore({
                url: "data/describe_feature_type.xml",
                ignore: {name: "the_geom"}
            }),
            bbar: ["->", {
                text: "Show SLD",
                handler: function() {
                    showSLD(panel);
                }
            }]
        });

    });
    </script>
</head>
<body>
    <h3>The TextSymbolizer lets you determine label styles.</h3>
    <div id="panel"></div>
</body>
</html>
